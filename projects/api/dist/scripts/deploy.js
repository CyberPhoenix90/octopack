"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const project_crawler_1 = require("../projects/project_crawler");
const script_1 = require("./script");
const project_selector_1 = require("../projects/project_selector");
const build_1 = require("./build");
const config_resolver_1 = require("config_resolver");
const path_1 = require("path");
const child_process_1 = require("child_process");
class Deploy extends script_1.Script {
    autoComplete() {
        throw new Error('Method not implemented.');
    }
    help() {
        return {
            description: 'Deploys stuff'
        };
    }
    async run(args, context) {
        const allProjects = await project_crawler_1.projectCrawler.findProjects(context.workspaceRoot, context);
        const selectedProjects = project_selector_1.getSelectedProjects(args.list, allProjects, context).filter((p) => p.resolvedConfig.deploy);
        if (selectedProjects.length) {
            for (const project of selectedProjects) {
                const deployDir = path_1.join(project.path, project.resolvedConfig.deploy.deployDir);
                await new build_1.Build().run({
                    list: [project.resolvedConfig.name],
                    map: {
                        ...args.map,
                        remapImportSource: '../internal_dependencies'
                    },
                    raw: args.raw
                }, context);
                const bundle = config_resolver_1.getBundle(project.resolvedConfig, args.map);
                if (!bundle) {
                    throw new Error(`No bundle could be determined for project ${project} please define a default or state the bundle to be used with a CLI flag`);
                }
                const config = project.resolvedConfig.build.bundles[bundle];
                const outDir = path_1.join(project.path, config.output);
                if (await context.fileSystem.exists(deployDir)) {
                    await context.fileSystem.deleteDirectory(deployDir);
                }
                await context.fileSystem.copyDirectory(outDir, path_1.join(deployDir, 'dist'));
                await context.fileSystem.copyFile(path_1.join(project.path, 'package.json'), path_1.join(deployDir, 'package.json'));
                await context.fileSystem.mkdir(path_1.join(deployDir, 'internal_dependencies'));
                for (const dep of project.projectDependencies.values()) {
                    await this.prepareDependency(dep, args, deployDir, context);
                }
                await install(deployDir);
            }
        }
        else {
            context.uiLogger.error('Nothing found that can be deployed');
        }
        return {};
    }
    async prepareDependency(dep, args, deployDir, context) {
        const target = path_1.join(deployDir, 'internal_dependencies', dep.resolvedConfig.name);
        if (await context.fileSystem.exists(target)) {
            return;
        }
        await new build_1.Build().run({
            list: [dep.resolvedConfig.name],
            map: {
                ...args.map,
                remapImportSource: '../../'
            },
            raw: args.raw
        }, context);
        await context.fileSystem.mkdir(target);
        const depBundle = config_resolver_1.getBundle(dep.resolvedConfig, args.map);
        const depConfig = dep.resolvedConfig.build.bundles[depBundle];
        const depOutDir = path_1.join(dep.path, depConfig.output);
        await context.fileSystem.copyFile(path_1.join(dep.path, 'package.json'), path_1.join(target, 'package.json'));
        await context.fileSystem.copyDirectory(depOutDir, path_1.join(target, 'dist'));
        await install(target);
        for (const subDep of dep.projectDependencies.values()) {
            await this.prepareDependency(subDep, args, deployDir, context);
        }
    }
}
exports.Deploy = Deploy;
async function install(path, isRetry = false) {
    await runCommand('npm', ['install']);
    await runCommand('npm', ['install', '--package-lock-only']);
    function runCommand(cli, args) {
        return new Promise((resolve, reject) => {
            const handle = child_process_1.spawn(cli, args, {
                cwd: path
            });
            const stdBuffer = [];
            handle.stdout.on('data', (msg) => {
                stdBuffer.push(msg);
            });
            handle.stderr.on('data', (msg) => {
                stdBuffer.push(msg);
            });
            handle.on('error', (err) => {
                reject(err);
            });
            handle.on('close', () => {
                resolve();
            });
            handle.on('exit', (code) => {
                if (code !== 0) {
                    if (isRetry) {
                        console.error(stdBuffer.join(''));
                        reject(code);
                    }
                    else {
                        install(path, true).then(resolve, reject);
                    }
                }
                else {
                    resolve();
                }
            });
        });
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlcGxveS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZGVwbG95LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgcHJvamVjdF9jcmF3bGVyXzEgPSByZXF1aXJlKFwiLi4vcHJvamVjdHMvcHJvamVjdF9jcmF3bGVyXCIpO1xuY29uc3Qgc2NyaXB0XzEgPSByZXF1aXJlKFwiLi9zY3JpcHRcIik7XG5jb25zdCBwcm9qZWN0X3NlbGVjdG9yXzEgPSByZXF1aXJlKFwiLi4vcHJvamVjdHMvcHJvamVjdF9zZWxlY3RvclwiKTtcbmNvbnN0IGJ1aWxkXzEgPSByZXF1aXJlKFwiLi9idWlsZFwiKTtcbmNvbnN0IGNvbmZpZ19yZXNvbHZlcl8xID0gcmVxdWlyZShcImNvbmZpZ19yZXNvbHZlclwiKTtcbmNvbnN0IHBhdGhfMSA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuY29uc3QgY2hpbGRfcHJvY2Vzc18xID0gcmVxdWlyZShcImNoaWxkX3Byb2Nlc3NcIik7XG5jbGFzcyBEZXBsb3kgZXh0ZW5kcyBzY3JpcHRfMS5TY3JpcHQge1xuICAgIGF1dG9Db21wbGV0ZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICAgIH1cbiAgICBoZWxwKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdEZXBsb3lzIHN0dWZmJ1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBydW4oYXJncywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBhbGxQcm9qZWN0cyA9IGF3YWl0IHByb2plY3RfY3Jhd2xlcl8xLnByb2plY3RDcmF3bGVyLmZpbmRQcm9qZWN0cyhjb250ZXh0LndvcmtzcGFjZVJvb3QsIGNvbnRleHQpO1xuICAgICAgICBjb25zdCBzZWxlY3RlZFByb2plY3RzID0gcHJvamVjdF9zZWxlY3Rvcl8xLmdldFNlbGVjdGVkUHJvamVjdHMoYXJncy5saXN0LCBhbGxQcm9qZWN0cywgY29udGV4dCkuZmlsdGVyKChwKSA9PiBwLnJlc29sdmVkQ29uZmlnLmRlcGxveSk7XG4gICAgICAgIGlmIChzZWxlY3RlZFByb2plY3RzLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHNlbGVjdGVkUHJvamVjdHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXBsb3lEaXIgPSBwYXRoXzEuam9pbihwcm9qZWN0LnBhdGgsIHByb2plY3QucmVzb2x2ZWRDb25maWcuZGVwbG95LmRlcGxveURpcik7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IGJ1aWxkXzEuQnVpbGQoKS5ydW4oe1xuICAgICAgICAgICAgICAgICAgICBsaXN0OiBbcHJvamVjdC5yZXNvbHZlZENvbmZpZy5uYW1lXSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5hcmdzLm1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFwSW1wb3J0U291cmNlOiAnLi4vaW50ZXJuYWxfZGVwZW5kZW5jaWVzJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByYXc6IGFyZ3MucmF3XG4gICAgICAgICAgICAgICAgfSwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVuZGxlID0gY29uZmlnX3Jlc29sdmVyXzEuZ2V0QnVuZGxlKHByb2plY3QucmVzb2x2ZWRDb25maWcsIGFyZ3MubWFwKTtcbiAgICAgICAgICAgICAgICBpZiAoIWJ1bmRsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGJ1bmRsZSBjb3VsZCBiZSBkZXRlcm1pbmVkIGZvciBwcm9qZWN0ICR7cHJvamVjdH0gcGxlYXNlIGRlZmluZSBhIGRlZmF1bHQgb3Igc3RhdGUgdGhlIGJ1bmRsZSB0byBiZSB1c2VkIHdpdGggYSBDTEkgZmxhZ2ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSBwcm9qZWN0LnJlc29sdmVkQ29uZmlnLmJ1aWxkLmJ1bmRsZXNbYnVuZGxlXTtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXREaXIgPSBwYXRoXzEuam9pbihwcm9qZWN0LnBhdGgsIGNvbmZpZy5vdXRwdXQpO1xuICAgICAgICAgICAgICAgIGlmIChhd2FpdCBjb250ZXh0LmZpbGVTeXN0ZW0uZXhpc3RzKGRlcGxveURpcikpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5maWxlU3lzdGVtLmRlbGV0ZURpcmVjdG9yeShkZXBsb3lEaXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LmZpbGVTeXN0ZW0uY29weURpcmVjdG9yeShvdXREaXIsIHBhdGhfMS5qb2luKGRlcGxveURpciwgJ2Rpc3QnKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5maWxlU3lzdGVtLmNvcHlGaWxlKHBhdGhfMS5qb2luKHByb2plY3QucGF0aCwgJ3BhY2thZ2UuanNvbicpLCBwYXRoXzEuam9pbihkZXBsb3lEaXIsICdwYWNrYWdlLmpzb24nKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5maWxlU3lzdGVtLm1rZGlyKHBhdGhfMS5qb2luKGRlcGxveURpciwgJ2ludGVybmFsX2RlcGVuZGVuY2llcycpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRlcCBvZiBwcm9qZWN0LnByb2plY3REZXBlbmRlbmNpZXMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wcmVwYXJlRGVwZW5kZW5jeShkZXAsIGFyZ3MsIGRlcGxveURpciwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IGluc3RhbGwoZGVwbG95RGlyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHQudWlMb2dnZXIuZXJyb3IoJ05vdGhpbmcgZm91bmQgdGhhdCBjYW4gYmUgZGVwbG95ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGFzeW5jIHByZXBhcmVEZXBlbmRlbmN5KGRlcCwgYXJncywgZGVwbG95RGlyLCBjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHBhdGhfMS5qb2luKGRlcGxveURpciwgJ2ludGVybmFsX2RlcGVuZGVuY2llcycsIGRlcC5yZXNvbHZlZENvbmZpZy5uYW1lKTtcbiAgICAgICAgaWYgKGF3YWl0IGNvbnRleHQuZmlsZVN5c3RlbS5leGlzdHModGFyZ2V0KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IG5ldyBidWlsZF8xLkJ1aWxkKCkucnVuKHtcbiAgICAgICAgICAgIGxpc3Q6IFtkZXAucmVzb2x2ZWRDb25maWcubmFtZV0sXG4gICAgICAgICAgICBtYXA6IHtcbiAgICAgICAgICAgICAgICAuLi5hcmdzLm1hcCxcbiAgICAgICAgICAgICAgICByZW1hcEltcG9ydFNvdXJjZTogJy4uLy4uLydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByYXc6IGFyZ3MucmF3XG4gICAgICAgIH0sIGNvbnRleHQpO1xuICAgICAgICBhd2FpdCBjb250ZXh0LmZpbGVTeXN0ZW0ubWtkaXIodGFyZ2V0KTtcbiAgICAgICAgY29uc3QgZGVwQnVuZGxlID0gY29uZmlnX3Jlc29sdmVyXzEuZ2V0QnVuZGxlKGRlcC5yZXNvbHZlZENvbmZpZywgYXJncy5tYXApO1xuICAgICAgICBjb25zdCBkZXBDb25maWcgPSBkZXAucmVzb2x2ZWRDb25maWcuYnVpbGQuYnVuZGxlc1tkZXBCdW5kbGVdO1xuICAgICAgICBjb25zdCBkZXBPdXREaXIgPSBwYXRoXzEuam9pbihkZXAucGF0aCwgZGVwQ29uZmlnLm91dHB1dCk7XG4gICAgICAgIGF3YWl0IGNvbnRleHQuZmlsZVN5c3RlbS5jb3B5RmlsZShwYXRoXzEuam9pbihkZXAucGF0aCwgJ3BhY2thZ2UuanNvbicpLCBwYXRoXzEuam9pbih0YXJnZXQsICdwYWNrYWdlLmpzb24nKSk7XG4gICAgICAgIGF3YWl0IGNvbnRleHQuZmlsZVN5c3RlbS5jb3B5RGlyZWN0b3J5KGRlcE91dERpciwgcGF0aF8xLmpvaW4odGFyZ2V0LCAnZGlzdCcpKTtcbiAgICAgICAgYXdhaXQgaW5zdGFsbCh0YXJnZXQpO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YkRlcCBvZiBkZXAucHJvamVjdERlcGVuZGVuY2llcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcmVwYXJlRGVwZW5kZW5jeShzdWJEZXAsIGFyZ3MsIGRlcGxveURpciwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkRlcGxveSA9IERlcGxveTtcbmFzeW5jIGZ1bmN0aW9uIGluc3RhbGwocGF0aCwgaXNSZXRyeSA9IGZhbHNlKSB7XG4gICAgYXdhaXQgcnVuQ29tbWFuZCgnbnBtJywgWydpbnN0YWxsJ10pO1xuICAgIGF3YWl0IHJ1bkNvbW1hbmQoJ25wbScsIFsnaW5zdGFsbCcsICctLXBhY2thZ2UtbG9jay1vbmx5J10pO1xuICAgIGZ1bmN0aW9uIHJ1bkNvbW1hbmQoY2xpLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGUgPSBjaGlsZF9wcm9jZXNzXzEuc3Bhd24oY2xpLCBhcmdzLCB7XG4gICAgICAgICAgICAgICAgY3dkOiBwYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHN0ZEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgaGFuZGxlLnN0ZG91dC5vbignZGF0YScsIChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICBzdGRCdWZmZXIucHVzaChtc2cpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoYW5kbGUuc3RkZXJyLm9uKCdkYXRhJywgKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHN0ZEJ1ZmZlci5wdXNoKG1zZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhbmRsZS5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhbmRsZS5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoYW5kbGUub24oJ2V4aXQnLCAoY29kZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1JldHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHN0ZEJ1ZmZlci5qb2luKCcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsKHBhdGgsIHRydWUpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laR1Z3Ykc5NUxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpWkdWd2JHOTVMbXB6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUk3TzBGQlFVRXNhVVZCUVRaRU8wRkJRemRFTEhGRFFVRnJRenRCUVVOc1F5eHRSVUZCYlVVN1FVRkRia1VzYlVOQlFXZERPMEZCUTJoRExIRkVRVUUwUXp0QlFVTTFReXdyUWtGQk5FSTdRVUZETlVJc2FVUkJRWE5ETzBGQlEzUkRMRTFCUVdFc1RVRkJUeXhUUVVGUkxHVkJRVTA3U1VGRE9VSXNXVUZCV1R0UlFVTlNMRTFCUVUwc1NVRkJTU3hMUVVGTExFTkJRVU1zZVVKQlFYbENMRU5CUVVNc1EwRkJRenRKUVVNdlF5eERRVUZETzBsQlEwUXNTVUZCU1R0UlFVTkJMRTlCUVU4N1dVRkRTQ3hYUVVGWExFVkJRVVVzWlVGQlpUdFRRVU12UWl4RFFVRkRPMGxCUTA0c1EwRkJRenRKUVVORUxFdEJRVXNzUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RlFVRkZMRTlCUVU4N1VVRkRia0lzVFVGQlRTeFhRVUZYTEVkQlFVY3NUVUZCVFN4blEwRkJZeXhEUVVGRExGbEJRVmtzUTBGQlF5eFBRVUZQTEVOQlFVTXNZVUZCWVN4RlFVRkZMRTlCUVU4c1EwRkJReXhEUVVGRE8xRkJRM1JHTEUxQlFVMHNaMEpCUVdkQ0xFZEJRVWNzYzBOQlFXMUNMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUlVGQlJTeFhRVUZYTEVWQlFVVXNUMEZCVHl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1kwRkJZeXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETzFGQlEzSklMRWxCUVVrc1owSkJRV2RDTEVOQlFVTXNUVUZCVFN4RlFVRkZPMWxCUTNwQ0xFdEJRVXNzVFVGQlRTeFBRVUZQTEVsQlFVa3NaMEpCUVdkQ0xFVkJRVVU3WjBKQlEzQkRMRTFCUVUwc1UwRkJVeXhIUVVGSExGZEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RlFVRkZMRTlCUVU4c1EwRkJReXhqUVVGakxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMmRDUVVNNVJTeE5RVUZOTEVsQlFVa3NZVUZCU3l4RlFVRkZMRU5CUVVNc1IwRkJSeXhEUVVGRE8yOUNRVU5zUWl4SlFVRkpMRVZCUVVVc1EwRkJReXhQUVVGUExFTkJRVU1zWTBGQll5eERRVUZETEVsQlFVa3NRMEZCUXp0dlFrRkRia01zUjBGQlJ5eEZRVUZGTzNkQ1FVTkVMRWRCUVVjc1NVRkJTU3hEUVVGRExFZEJRVWM3ZDBKQlExZ3NhVUpCUVdsQ0xFVkJRVVVzTUVKQlFUQkNPM0ZDUVVOb1JEdHZRa0ZEUkN4SFFVRkhMRVZCUVVVc1NVRkJTU3hEUVVGRExFZEJRVWM3YVVKQlEyaENMRVZCUVVVc1QwRkJUeXhEUVVGRExFTkJRVU03WjBKQlExb3NUVUZCVFN4TlFVRk5MRWRCUVVjc01rSkJRVk1zUTBGQlF5eFBRVUZQTEVOQlFVTXNZMEZCWXl4RlFVRkZMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF6dG5Ra0ZETTBRc1NVRkJTU3hEUVVGRExFMUJRVTBzUlVGQlJUdHZRa0ZEVkN4TlFVRk5MRWxCUVVrc1MwRkJTeXhEUVVGRExEWkRRVUUyUXl4UFFVRlBMSGxGUVVGNVJTeERRVUZETEVOQlFVTTdhVUpCUTJ4S08yZENRVU5FTEUxQlFVMHNUVUZCVFN4SFFVRkhMRTlCUVU4c1EwRkJReXhqUVVGakxFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRenRuUWtGRE5VUXNUVUZCVFN4TlFVRk5MRWRCUVVjc1YwRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTEVWQlFVVXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8yZENRVU5xUkN4SlFVRkpMRTFCUVUwc1QwRkJUeXhEUVVGRExGVkJRVlVzUTBGQlF5eE5RVUZOTEVOQlFVTXNVMEZCVXl4RFFVRkRMRVZCUVVVN2IwSkJRelZETEUxQlFVMHNUMEZCVHl4RFFVRkRMRlZCUVZVc1EwRkJReXhsUVVGbExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTTdhVUpCUTNaRU8yZENRVU5FTEUxQlFVMHNUMEZCVHl4RFFVRkRMRlZCUVZVc1EwRkJReXhoUVVGaExFTkJRVU1zVFVGQlRTeEZRVUZGTEZkQlFVa3NRMEZCUXl4VFFVRlRMRVZCUVVVc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZEZUVVc1RVRkJUU3hQUVVGUExFTkJRVU1zVlVGQlZTeERRVUZETEZGQlFWRXNRMEZCUXl4WFFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUlVGQlJTeGpRVUZqTEVOQlFVTXNSVUZCUlN4WFFVRkpMRU5CUVVNc1UwRkJVeXhGUVVGRkxHTkJRV01zUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUTNaSExFMUJRVTBzVDBGQlR5eERRVUZETEZWQlFWVXNRMEZCUXl4TFFVRkxMRU5CUVVNc1YwRkJTU3hEUVVGRExGTkJRVk1zUlVGQlJTeDFRa0ZCZFVJc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEzcEZMRXRCUVVzc1RVRkJUU3hIUVVGSExFbEJRVWtzVDBGQlR5eERRVUZETEcxQ1FVRnRRaXhEUVVGRExFMUJRVTBzUlVGQlJTeEZRVUZGTzI5Q1FVTndSQ3hOUVVGTkxFbEJRVWtzUTBGQlF5eHBRa0ZCYVVJc1EwRkJReXhIUVVGSExFVkJRVVVzU1VGQlNTeEZRVUZGTEZOQlFWTXNSVUZCUlN4UFFVRlBMRU5CUVVNc1EwRkJRenRwUWtGREwwUTdaMEpCUTBRc1RVRkJUU3hQUVVGUExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTTdZVUZETlVJN1UwRkRTanRoUVVOSk8xbEJRMFFzVDBGQlR5eERRVUZETEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc2IwTkJRVzlETEVOQlFVTXNRMEZCUXp0VFFVTm9SVHRSUVVORUxFOUJRVThzUlVGQlJTeERRVUZETzBsQlEyUXNRMEZCUXp0SlFVTkVMRXRCUVVzc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4SFFVRkhMRVZCUVVVc1NVRkJTU3hGUVVGRkxGTkJRVk1zUlVGQlJTeFBRVUZQTzFGQlEycEVMRTFCUVUwc1RVRkJUU3hIUVVGSExGZEJRVWtzUTBGQlF5eFRRVUZUTEVWQlFVVXNkVUpCUVhWQ0xFVkJRVVVzUjBGQlJ5eERRVUZETEdOQlFXTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRSUVVOcVJpeEpRVUZKTEUxQlFVMHNUMEZCVHl4RFFVRkRMRlZCUVZVc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEVWQlFVVTdXVUZEZWtNc1QwRkJUenRUUVVOV08xRkJRMFFzVFVGQlRTeEpRVUZKTEdGQlFVc3NSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJRenRaUVVOc1FpeEpRVUZKTEVWQlFVVXNRMEZCUXl4SFFVRkhMRU5CUVVNc1kwRkJZeXhEUVVGRExFbEJRVWtzUTBGQlF6dFpRVU12UWl4SFFVRkhMRVZCUVVVN1owSkJRMFFzUjBGQlJ5eEpRVUZKTEVOQlFVTXNSMEZCUnp0blFrRkRXQ3hwUWtGQmFVSXNSVUZCUlN4UlFVRlJPMkZCUXpsQ08xbEJRMFFzUjBGQlJ5eEZRVUZGTEVsQlFVa3NRMEZCUXl4SFFVRkhPMU5CUTJoQ0xFVkJRVVVzVDBGQlR5eERRVUZETEVOQlFVTTdVVUZEV2l4TlFVRk5MRTlCUVU4c1EwRkJReXhWUVVGVkxFTkJRVU1zUzBGQlN5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPMUZCUTNaRExFMUJRVTBzVTBGQlV5eEhRVUZITERKQ1FVRlRMRU5CUVVNc1IwRkJSeXhEUVVGRExHTkJRV01zUlVGQlJTeEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNN1VVRkRNVVFzVFVGQlRTeFRRVUZUTEVkQlFVY3NSMEZCUnl4RFFVRkRMR05CUVdNc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMUZCUXpsRUxFMUJRVTBzVTBGQlV5eEhRVUZITEZkQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTU3hGUVVGRkxGTkJRVk1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXp0UlFVTnVSQ3hOUVVGTkxFOUJRVThzUTBGQlF5eFZRVUZWTEVOQlFVTXNVVUZCVVN4RFFVRkRMRmRCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeEZRVUZGTEdOQlFXTXNRMEZCUXl4RlFVRkZMRmRCUVVrc1EwRkJReXhOUVVGTkxFVkJRVVVzWTBGQll5eERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTm9SeXhOUVVGTkxFOUJRVThzUTBGQlF5eFZRVUZWTEVOQlFVTXNZVUZCWVN4RFFVRkRMRk5CUVZNc1JVRkJSU3hYUVVGSkxFTkJRVU1zVFVGQlRTeEZRVUZGTEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkRlRVVzVFVGQlRTeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNN1VVRkRkRUlzUzBGQlN5eE5RVUZOTEUxQlFVMHNTVUZCU1N4SFFVRkhMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNUVUZCVFN4RlFVRkZMRVZCUVVVN1dVRkRia1FzVFVGQlRTeEpRVUZKTEVOQlFVTXNhVUpCUVdsQ0xFTkJRVU1zVFVGQlRTeEZRVUZGTEVsQlFVa3NSVUZCUlN4VFFVRlRMRVZCUVVVc1QwRkJUeXhEUVVGRExFTkJRVU03VTBGRGJFVTdTVUZEVEN4RFFVRkRPME5CUTBvN1FVRjBSVVFzZDBKQmMwVkRPMEZCUTBRc1MwRkJTeXhWUVVGVkxFOUJRVThzUTBGQlF5eEpRVUZKTEVWQlFVVXNUMEZCVHl4SFFVRkhMRXRCUVVzN1NVRkRlRU1zVFVGQlRTeFZRVUZWTEVOQlFVTXNTMEZCU3l4RlFVRkZMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU55UXl4TlFVRk5MRlZCUVZVc1EwRkJReXhMUVVGTExFVkJRVVVzUTBGQlF5eFRRVUZUTEVWQlFVVXNjVUpCUVhGQ0xFTkJRVU1zUTBGQlF5eERRVUZETzBsQlF6VkVMRk5CUVZNc1ZVRkJWU3hEUVVGRExFZEJRVWNzUlVGQlJTeEpRVUZKTzFGQlEzcENMRTlCUVU4c1NVRkJTU3hQUVVGUExFTkJRVU1zUTBGQlF5eFBRVUZQTEVWQlFVVXNUVUZCVFN4RlFVRkZMRVZCUVVVN1dVRkRia01zVFVGQlRTeE5RVUZOTEVkQlFVY3NjVUpCUVVzc1EwRkJReXhIUVVGSExFVkJRVVVzU1VGQlNTeEZRVUZGTzJkQ1FVTTFRaXhIUVVGSExFVkJRVVVzU1VGQlNUdGhRVU5hTEVOQlFVTXNRMEZCUXp0WlFVTklMRTFCUVUwc1UwRkJVeXhIUVVGSExFVkJRVVVzUTBGQlF6dFpRVU55UWl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExFVkJRVVVzUTBGQlF5eE5RVUZOTEVWQlFVVXNRMEZCUXl4SFFVRkhMRVZCUVVVc1JVRkJSVHRuUWtGRE4wSXNVMEZCVXl4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF6dFpRVU40UWl4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOSUxFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTXNSVUZCUlN4RFFVRkRMRTFCUVUwc1JVRkJSU3hEUVVGRExFZEJRVWNzUlVGQlJTeEZRVUZGTzJkQ1FVTTNRaXhUUVVGVExFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRPMWxCUTNoQ0xFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEwZ3NUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJReXhQUVVGUExFVkJRVVVzUTBGQlF5eEhRVUZITEVWQlFVVXNSVUZCUlR0blFrRkRka0lzVFVGQlRTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRPMWxCUTJoQ0xFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEwZ3NUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJReXhQUVVGUExFVkJRVVVzUjBGQlJ5eEZRVUZGTzJkQ1FVTndRaXhQUVVGUExFVkJRVVVzUTBGQlF6dFpRVU5rTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTBnc1RVRkJUU3hEUVVGRExFVkJRVVVzUTBGQlF5eE5RVUZOTEVWQlFVVXNRMEZCUXl4SlFVRkpMRVZCUVVVc1JVRkJSVHRuUWtGRGRrSXNTVUZCU1N4SlFVRkpMRXRCUVVzc1EwRkJReXhGUVVGRk8yOUNRVU5hTEVsQlFVa3NUMEZCVHl4RlFVRkZPM2RDUVVOVUxFOUJRVThzUTBGQlF5eExRVUZMTEVOQlFVTXNVMEZCVXl4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETzNkQ1FVTnNReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdjVUpCUTJoQ08zbENRVU5KTzNkQ1FVTkVMRTlCUVU4c1EwRkJReXhKUVVGSkxFVkJRVVVzU1VGQlNTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1JVRkJSU3hOUVVGTkxFTkJRVU1zUTBGQlF6dHhRa0ZETjBNN2FVSkJRMG83Y1VKQlEwazdiMEpCUTBRc1QwRkJUeXhGUVVGRkxFTkJRVU03YVVKQlEySTdXVUZEVEN4RFFVRkRMRU5CUVVNc1EwRkJRenRSUVVOUUxFTkJRVU1zUTBGQlF5eERRVUZETzBsQlExQXNRMEZCUXp0QlFVTk1MRU5CUVVNaWZRPT0iXX0=