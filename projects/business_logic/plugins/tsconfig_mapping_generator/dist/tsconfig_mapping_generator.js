"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
function tsconfigMappingGenerator(args) {
    return async (projects, context) => {
        let config;
        if (context.fileSystem.exists(path_1.join(context.workspaceRoot, 'tsconfig.json'))) {
            config = JSON.parse(await context.fileSystem.readFile(path_1.join(context.workspaceRoot, 'tsconfig.json'), 'utf8'));
        }
        else {
            config = {
                compilerOptions: {}
            };
        }
        config.compilerOptions.baseUrl = '.';
        config.compilerOptions.paths = {};
        for (const p of projects) {
            config.compilerOptions.paths[p.resolvedConfig.name] = [path_1.relative(context.workspaceRoot, p.path)];
        }
        await context.fileSystem.writeFile(path_1.join(context.workspaceRoot, 'tsconfig.json'), JSON.stringify(config, undefined, 4));
    };
}
exports.tsconfigMappingGenerator = tsconfigMappingGenerator;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHNjb25maWdfbWFwcGluZ19nZW5lcmF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0c2NvbmZpZ19tYXBwaW5nX2dlbmVyYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUV0QyxNQUFNLFVBQVUsd0JBQXdCLENBQUMsSUFBa0I7SUFDMUQsT0FBTyxLQUFLLEVBQUUsUUFBbUIsRUFBRSxPQUFzQixFQUFFLEVBQUU7UUFDNUQsSUFBSSxNQUFNLENBQUM7UUFDWCxJQUFJLE9BQU8sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLGVBQWUsQ0FBQyxDQUFDLEVBQUU7WUFDNUUsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQ2xCLE1BQU0sT0FBTyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsZUFBZSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQ3ZGLENBQUM7U0FDRjthQUFNO1lBQ04sTUFBTSxHQUFHO2dCQUNSLGVBQWUsRUFBRSxFQUFFO2FBQ25CLENBQUM7U0FDRjtRQUNELE1BQU0sQ0FBQyxlQUFlLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQztRQUNyQyxNQUFNLENBQUMsZUFBZSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDbEMsS0FBSyxNQUFNLENBQUMsSUFBSSxRQUFRLEVBQUU7WUFDekIsTUFBTSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQ2hHO1FBRUQsTUFBTSxPQUFPLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsZUFBZSxDQUFDLEVBQzVDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FDcEMsQ0FBQztJQUNILENBQUMsQ0FBQztBQUNILENBQUMifQ==
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHNjb25maWdfbWFwcGluZ19nZW5lcmF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0c2NvbmZpZ19tYXBwaW5nX2dlbmVyYXRvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUFzQztBQUN0QyxTQUFnQix3QkFBd0IsQ0FBQyxJQUFJO0lBQ3pDLE9BQU8sS0FBSyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsRUFBRTtRQUMvQixJQUFJLE1BQU0sQ0FBQztRQUNYLElBQUksT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsV0FBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsZUFBZSxDQUFDLENBQUMsRUFBRTtZQUN6RSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLE9BQU8sQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFdBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLGVBQWUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7U0FDaEg7YUFDSTtZQUNELE1BQU0sR0FBRztnQkFDTCxlQUFlLEVBQUUsRUFBRTthQUN0QixDQUFDO1NBQ0w7UUFDRCxNQUFNLENBQUMsZUFBZSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7UUFDckMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ2xDLEtBQUssTUFBTSxDQUFDLElBQUksUUFBUSxFQUFFO1lBQ3RCLE1BQU0sQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxlQUFRLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztTQUNuRztRQUNELE1BQU0sT0FBTyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsV0FBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsZUFBZSxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0gsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQWxCRCw0REFrQkM7QUFDRCxzNENBQXM0QyJ9