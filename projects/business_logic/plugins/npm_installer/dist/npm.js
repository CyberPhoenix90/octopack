"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const child_process_1 = require("child_process");
const path_1 = require("path");
function npmInstall(args) {
    return async (model, context) => {
        if (await context.fileSystem.exists(path_1.join(model.project.path, 'package.json'))) {
            const pkg = JSON.parse(await context.fileSystem.readFile(path_1.join(model.project.path, 'package.json'), 'utf8'));
            if (pkg.dependencies &&
                Object.keys(pkg.dependencies).length > 0 &&
                !(await isUpToDate(model, context, pkg))) {
                context.uiLogger.info(`[${model.project.resolvedConfig.name}]Installing npm dependencies`);
                await install(model.project);
            }
        }
        return model;
    };
}
exports.npmInstall = npmInstall;
async function isUpToDate(model, context, pkg) {
    if (await context.fileSystem.exists(path_1.join(model.project.path, 'package-lock.json'))) {
        const lockFile = JSON.parse(await context.fileSystem.readFile(path_1.join(model.project.path, 'package-lock.json'), 'utf8'));
        for (const dep of Object.keys(pkg.dependencies)) {
            if (await context.fileSystem.exists(path_1.join(model.project.path, 'node_modules', dep, 'package.json'))) {
                const depPkg = JSON.parse(await context.fileSystem.readFile(path_1.join(model.project.path, 'node_modules', dep, 'package.json'), 'utf8'));
                if (depPkg.version !== lockFile.dependencies[dep].version) {
                    return false;
                }
            }
            else {
                return false;
            }
        }
    }
    else {
        return false;
    }
    return true;
}
async function install(project, isRetry = false) {
    await runCommand('npm', ['install']);
    await runCommand('npm', ['install', '--package-lock-only']);
    function runCommand(cli, args) {
        return new Promise((resolve, reject) => {
            const handle = child_process_1.spawn(cli, args, {
                cwd: project.path
            });
            const stdBuffer = [];
            handle.stdout.on('data', (msg) => {
                stdBuffer.push(msg);
            });
            handle.stderr.on('data', (msg) => {
                stdBuffer.push(msg);
            });
            handle.on('error', (err) => {
                reject(err);
            });
            handle.on('close', () => {
                resolve();
            });
            handle.on('exit', (code) => {
                if (code !== 0) {
                    if (isRetry) {
                        console.error(stdBuffer.join(''));
                        reject(code);
                    }
                    else {
                        install(project, true).then(resolve, reject);
                    }
                }
                else {
                    resolve();
                }
            });
        });
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5wbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibnBtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgY2hpbGRfcHJvY2Vzc18xID0gcmVxdWlyZShcImNoaWxkX3Byb2Nlc3NcIik7XG5jb25zdCBwYXRoXzEgPSByZXF1aXJlKFwicGF0aFwiKTtcbmZ1bmN0aW9uIG5wbUluc3RhbGwoYXJncykge1xuICAgIHJldHVybiBhc3luYyAobW9kZWwsIGNvbnRleHQpID0+IHtcbiAgICAgICAgaWYgKGF3YWl0IGNvbnRleHQuZmlsZVN5c3RlbS5leGlzdHMocGF0aF8xLmpvaW4obW9kZWwucHJvamVjdC5wYXRoLCAncGFja2FnZS5qc29uJykpKSB7XG4gICAgICAgICAgICBjb25zdCBwa2cgPSBKU09OLnBhcnNlKGF3YWl0IGNvbnRleHQuZmlsZVN5c3RlbS5yZWFkRmlsZShwYXRoXzEuam9pbihtb2RlbC5wcm9qZWN0LnBhdGgsICdwYWNrYWdlLmpzb24nKSwgJ3V0ZjgnKSk7XG4gICAgICAgICAgICBpZiAocGtnLmRlcGVuZGVuY2llcyAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHBrZy5kZXBlbmRlbmNpZXMpLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAhKGF3YWl0IGlzVXBUb0RhdGUobW9kZWwsIGNvbnRleHQsIHBrZykpKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC51aUxvZ2dlci5pbmZvKGBbJHttb2RlbC5wcm9qZWN0LnJlc29sdmVkQ29uZmlnLm5hbWV9XUluc3RhbGxpbmcgbnBtIGRlcGVuZGVuY2llc2ApO1xuICAgICAgICAgICAgICAgIGF3YWl0IGluc3RhbGwobW9kZWwucHJvamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH07XG59XG5leHBvcnRzLm5wbUluc3RhbGwgPSBucG1JbnN0YWxsO1xuYXN5bmMgZnVuY3Rpb24gaXNVcFRvRGF0ZShtb2RlbCwgY29udGV4dCwgcGtnKSB7XG4gICAgaWYgKGF3YWl0IGNvbnRleHQuZmlsZVN5c3RlbS5leGlzdHMocGF0aF8xLmpvaW4obW9kZWwucHJvamVjdC5wYXRoLCAncGFja2FnZS1sb2NrLmpzb24nKSkpIHtcbiAgICAgICAgY29uc3QgbG9ja0ZpbGUgPSBKU09OLnBhcnNlKGF3YWl0IGNvbnRleHQuZmlsZVN5c3RlbS5yZWFkRmlsZShwYXRoXzEuam9pbihtb2RlbC5wcm9qZWN0LnBhdGgsICdwYWNrYWdlLWxvY2suanNvbicpLCAndXRmOCcpKTtcbiAgICAgICAgZm9yIChjb25zdCBkZXAgb2YgT2JqZWN0LmtleXMocGtnLmRlcGVuZGVuY2llcykpIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCBjb250ZXh0LmZpbGVTeXN0ZW0uZXhpc3RzKHBhdGhfMS5qb2luKG1vZGVsLnByb2plY3QucGF0aCwgJ25vZGVfbW9kdWxlcycsIGRlcCwgJ3BhY2thZ2UuanNvbicpKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcFBrZyA9IEpTT04ucGFyc2UoYXdhaXQgY29udGV4dC5maWxlU3lzdGVtLnJlYWRGaWxlKHBhdGhfMS5qb2luKG1vZGVsLnByb2plY3QucGF0aCwgJ25vZGVfbW9kdWxlcycsIGRlcCwgJ3BhY2thZ2UuanNvbicpLCAndXRmOCcpKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVwUGtnLnZlcnNpb24gIT09IGxvY2tGaWxlLmRlcGVuZGVuY2llc1tkZXBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGluc3RhbGwocHJvamVjdCwgaXNSZXRyeSA9IGZhbHNlKSB7XG4gICAgYXdhaXQgcnVuQ29tbWFuZCgnbnBtJywgWydpbnN0YWxsJ10pO1xuICAgIGF3YWl0IHJ1bkNvbW1hbmQoJ25wbScsIFsnaW5zdGFsbCcsICctLXBhY2thZ2UtbG9jay1vbmx5J10pO1xuICAgIGZ1bmN0aW9uIHJ1bkNvbW1hbmQoY2xpLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGUgPSBjaGlsZF9wcm9jZXNzXzEuc3Bhd24oY2xpLCBhcmdzLCB7XG4gICAgICAgICAgICAgICAgY3dkOiBwcm9qZWN0LnBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc3RkQnVmZmVyID0gW107XG4gICAgICAgICAgICBoYW5kbGUuc3Rkb3V0Lm9uKCdkYXRhJywgKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHN0ZEJ1ZmZlci5wdXNoKG1zZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhbmRsZS5zdGRlcnIub24oJ2RhdGEnLCAobXNnKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RkQnVmZmVyLnB1c2gobXNnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGFuZGxlLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGFuZGxlLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhbmRsZS5vbignZXhpdCcsIChjb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmV0cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Ioc3RkQnVmZmVyLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbGwocHJvamVjdCwgdHJ1ZSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWJuQnRMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWJuQnRMbXB6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUk3TzBGQlFVRXNhVVJCUVhORE8wRkJRM1JETEN0Q1FVRTBRanRCUVVNMVFpeFRRVUZuUWl4VlFVRlZMRU5CUVVNc1NVRkJTVHRKUVVNelFpeFBRVUZQTEV0QlFVc3NSVUZCUlN4TFFVRkxMRVZCUVVVc1QwRkJUeXhGUVVGRkxFVkJRVVU3VVVGRE5VSXNTVUZCU1N4TlFVRk5MRTlCUVU4c1EwRkJReXhWUVVGVkxFTkJRVU1zVFVGQlRTeERRVUZETEZkQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUlVGQlJTeGpRVUZqTEVOQlFVTXNRMEZCUXl4RlFVRkZPMWxCUXpORkxFMUJRVTBzUjBGQlJ5eEhRVUZITEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1RVRkJUU3hQUVVGUExFTkJRVU1zVlVGQlZTeERRVUZETEZGQlFWRXNRMEZCUXl4WFFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTEVWQlFVVXNZMEZCWXl4RFFVRkRMRVZCUVVVc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU0xUnl4SlFVRkpMRWRCUVVjc1EwRkJReXhaUVVGWk8yZENRVU5vUWl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4TlFVRk5MRWRCUVVjc1EwRkJRenRuUWtGRGVFTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1ZVRkJWU3hEUVVGRExFdEJRVXNzUlVGQlJTeFBRVUZQTEVWQlFVVXNSMEZCUnl4RFFVRkRMRU5CUVVNc1JVRkJSVHRuUWtGRE1VTXNUMEZCVHl4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMR05CUVdNc1EwRkJReXhKUVVGSkxEaENRVUU0UWl4RFFVRkRMRU5CUVVNN1owSkJRek5HTEUxQlFVMHNUMEZCVHl4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF6dGhRVU5vUXp0VFFVTktPMUZCUTBRc1QwRkJUeXhMUVVGTExFTkJRVU03U1VGRGFrSXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJRenRCUVdKRUxHZERRV0ZETzBGQlEwUXNTMEZCU3l4VlFVRlZMRlZCUVZVc1EwRkJReXhMUVVGTExFVkJRVVVzVDBGQlR5eEZRVUZGTEVkQlFVYzdTVUZEZWtNc1NVRkJTU3hOUVVGTkxFOUJRVThzUTBGQlF5eFZRVUZWTEVOQlFVTXNUVUZCVFN4RFFVRkRMRmRCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NSVUZCUlN4dFFrRkJiVUlzUTBGQlF5eERRVUZETEVWQlFVVTdVVUZEYUVZc1RVRkJUU3hSUVVGUkxFZEJRVWNzU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5MRTlCUVU4c1EwRkJReXhWUVVGVkxFTkJRVU1zVVVGQlVTeERRVUZETEZkQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUlVGQlJTeHRRa0ZCYlVJc1EwRkJReXhGUVVGRkxFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTTdVVUZEZEVnc1MwRkJTeXhOUVVGTkxFZEJRVWNzU1VGQlNTeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWRCUVVjc1EwRkJReXhaUVVGWkxFTkJRVU1zUlVGQlJUdFpRVU0zUXl4SlFVRkpMRTFCUVUwc1QwRkJUeXhEUVVGRExGVkJRVlVzUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGUExFTkJRVU1zU1VGQlNTeEZRVUZGTEdOQlFXTXNSVUZCUlN4SFFVRkhMRVZCUVVVc1kwRkJZeXhEUVVGRExFTkJRVU1zUlVGQlJUdG5Ra0ZEYUVjc1RVRkJUU3hOUVVGTkxFZEJRVWNzU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5MRTlCUVU4c1EwRkJReXhWUVVGVkxFTkJRVU1zVVVGQlVTeERRVUZETEZkQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUlVGQlJTeGpRVUZqTEVWQlFVVXNSMEZCUnl4RlFVRkZMR05CUVdNc1EwRkJReXhGUVVGRkxFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUTNCSkxFbEJRVWtzVFVGQlRTeERRVUZETEU5QlFVOHNTMEZCU3l4UlFVRlJMRU5CUVVNc1dVRkJXU3hEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEU5QlFVOHNSVUZCUlR0dlFrRkRka1FzVDBGQlR5eExRVUZMTEVOQlFVTTdhVUpCUTJoQ08yRkJRMG83YVVKQlEwazdaMEpCUTBRc1QwRkJUeXhMUVVGTExFTkJRVU03WVVGRGFFSTdVMEZEU2p0TFFVTktPMU5CUTBrN1VVRkRSQ3hQUVVGUExFdEJRVXNzUTBGQlF6dExRVU5vUWp0SlFVTkVMRTlCUVU4c1NVRkJTU3hEUVVGRE8wRkJRMmhDTEVOQlFVTTdRVUZEUkN4TFFVRkxMRlZCUVZVc1QwRkJUeXhEUVVGRExFOUJRVThzUlVGQlJTeFBRVUZQTEVkQlFVY3NTMEZCU3p0SlFVTXpReXhOUVVGTkxGVkJRVlVzUTBGQlF5eExRVUZMTEVWQlFVVXNRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhEUVVGRE8wbEJRM0pETEUxQlFVMHNWVUZCVlN4RFFVRkRMRXRCUVVzc1JVRkJSU3hEUVVGRExGTkJRVk1zUlVGQlJTeHhRa0ZCY1VJc1EwRkJReXhEUVVGRExFTkJRVU03U1VGRE5VUXNVMEZCVXl4VlFVRlZMRU5CUVVNc1IwRkJSeXhGUVVGRkxFbEJRVWs3VVVGRGVrSXNUMEZCVHl4SlFVRkpMRTlCUVU4c1EwRkJReXhEUVVGRExFOUJRVThzUlVGQlJTeE5RVUZOTEVWQlFVVXNSVUZCUlR0WlFVTnVReXhOUVVGTkxFMUJRVTBzUjBGQlJ5eHhRa0ZCU3l4RFFVRkRMRWRCUVVjc1JVRkJSU3hKUVVGSkxFVkJRVVU3WjBKQlF6VkNMRWRCUVVjc1JVRkJSU3hQUVVGUExFTkJRVU1zU1VGQlNUdGhRVU53UWl4RFFVRkRMRU5CUVVNN1dVRkRTQ3hOUVVGTkxGTkJRVk1zUjBGQlJ5eEZRVUZGTEVOQlFVTTdXVUZEY2tJc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eEZRVUZGTEVOQlFVTXNUVUZCVFN4RlFVRkZMRU5CUVVNc1IwRkJSeXhGUVVGRkxFVkJRVVU3WjBKQlF6ZENMRk5CUVZNc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTTdXVUZEZUVJc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRFNDeE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJReXhOUVVGTkxFVkJRVVVzUTBGQlF5eEhRVUZITEVWQlFVVXNSVUZCUlR0blFrRkROMElzVTBGQlV5eERRVUZETEVsQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRenRaUVVONFFpeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTklMRTFCUVUwc1EwRkJReXhGUVVGRkxFTkJRVU1zVDBGQlR5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RlFVRkZMRVZCUVVVN1owSkJRM1pDTEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRenRaUVVOb1FpeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTklMRTFCUVUwc1EwRkJReXhGUVVGRkxFTkJRVU1zVDBGQlR5eEZRVUZGTEVkQlFVY3NSVUZCUlR0blFrRkRjRUlzVDBGQlR5eEZRVUZGTEVOQlFVTTdXVUZEWkN4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOSUxFMUJRVTBzUTBGQlF5eEZRVUZGTEVOQlFVTXNUVUZCVFN4RlFVRkZMRU5CUVVNc1NVRkJTU3hGUVVGRkxFVkJRVVU3WjBKQlEzWkNMRWxCUVVrc1NVRkJTU3hMUVVGTExFTkJRVU1zUlVGQlJUdHZRa0ZEV2l4SlFVRkpMRTlCUVU4c1JVRkJSVHQzUWtGRFZDeFBRVUZQTEVOQlFVTXNTMEZCU3l4RFFVRkRMRk5CUVZNc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXp0M1FrRkRiRU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPM0ZDUVVOb1FqdDVRa0ZEU1R0M1FrRkRSQ3hQUVVGUExFTkJRVU1zVDBGQlR5eEZRVUZGTEVsQlFVa3NRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFVkJRVVVzVFVGQlRTeERRVUZETEVOQlFVTTdjVUpCUTJoRU8ybENRVU5LTzNGQ1FVTkpPMjlDUVVORUxFOUJRVThzUlVGQlJTeERRVUZETzJsQ1FVTmlPMWxCUTB3c1EwRkJReXhEUVVGRExFTkJRVU03VVVGRFVDeERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTlFMRU5CUVVNN1FVRkRUQ3hEUVVGREluMD0iXX0=